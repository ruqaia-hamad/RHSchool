package api;

import java.io.IOException;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.util.Scanner;

import com.google.gson.*;

public class GetRequest {

	public static void main(String[] args) throws IOException, InterruptedException {
		Scanner sc = new Scanner(System.in);
		boolean exit=true;
		while(exit) {
			try {
		System.out.println("please Enter number of users you want");
		Integer result = sc.nextInt();
		if (result == 0) {
			String url = "https://randomuser.me/api/";

			HttpClient client = HttpClient.newHttpClient();
			HttpRequest request = HttpRequest.newBuilder().uri(URI.create(url)).build();

			HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
			Data data = new Gson().fromJson(response.body(), Data.class);

			System.out.println("This the version " + data.getInfo().getVersion());
			System.out.println("The gender is  " + data.getResults().get(0).getGender());
			System.out.println("This the user name " + data.getResults().get(0).getName().getFirst()
					+ data.getResults().get(0).getName().getLast());
			System.out.println("**************");
		} else {
			for (Integer i = 0; i < result; i++) {
				String url = "https://randomuser.me/api/";

				HttpClient client = HttpClient.newHttpClient();
				HttpRequest request = HttpRequest.newBuilder().uri(URI.create(url)).build();

				HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
				Data data = new Gson().fromJson(response.body(), Data.class);


				System.out.println("This the version " + data.getInfo().getVersion());
				System.out.println("The gender is  " + data.getResults().get(0).getGender());
				System.out.println("This the user name " + data.getResults().get(0).getName().getFirst()
						+ data.getResults().get(0).getName().getLast());
				System.out.println("**************");
			}
			}}catch(Exception e) {
				System.out.println(e);
			}
		}exit=false;
	}
}