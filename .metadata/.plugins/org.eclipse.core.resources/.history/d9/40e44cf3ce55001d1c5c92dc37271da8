import java.util.Scanner;
import java.util.Iterator;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.util.*;
class Employee  implements Serializable{
    private int employeeNo;
    private String employeeName;
    private int salary;
    
    public Employee(int employeeNo , String  employeeName , int salary){
        this.employeeNo=employeeNo ;
        this.employeeName=employeeName;
        this.salary=salary;
        
    }
    
    public int getEmployeeNo(){
        return employeeNo;
    }
    
    public String getEmployeeName(){
        return employeeName;
    }
     public int getSalary(){
        return salary;
    }
    
    
    
    
    public String toString(){
        return " Employee Number :  " +employeeNo + "\n " +"Employee name :  " +employeeName + "\n "+ "Employee Salary:  " +salary;
    }
    


	public static void main(String[] args)  throws Exception{
	    Scanner sc=new Scanner(System.in);
	    Scanner scn=new Scanner(System.in);
	    File file = new File("employee.text");
	    ObjectOutputStream oos=null;
	    ObjectInputStream ois=null;
	    ArrayList<Employee> employeeList =new ArrayList<Employee>();
	    ListIterator li=null;
	    
	    if(file.isFile()){
	        ois=new ObjectInputStream  (new FileInputStream(file) );
	           employeeList=(ArrayList<Employee>)ois.readObject();
	                 ois.close();
	    }
	int choice=-1;
	
	do{
	    System.out.println("1- Insert");
	    System.out.println("2- Display");
	    System.out.println("3- Search");
	    System.out.println("4-Remove");
	    System.out.println("0- Exit");
	    System.out.println("Enter your choice");
	    choice=sc.nextInt();
	    switch(choice){
	        case 1 :
	            
	            System.out.println("Enter number of Employee");
	            int n=sc.nextInt();
	            for(int i=0;i<n;i++){
	            
	                  System.out.println("Enter Employee number");
	                  int employeeNo=sc.nextInt();
	                  System.out.println("Enter Employee name");
	                  String employeeName=scn.nextLine();
	                  System.out.println("Enter Employee Salary");
	                  int salary=sc.nextInt();
	             
	                  employeeList.add(new Employee(employeeNo,employeeName,salary));
	            }
	                  
	                 oos=new ObjectOutputStream (new FileOutputStream(file) );
	                 oos.writeObject(employeeList);
	                 oos.close();
	            
	      
	            break;
	         case 2 :  
	        
	             li=employeeList.listIterator();
	  
	             while(li.hasNext()){
	            	 System.out.println(li.next()); 
	            	 
	             }
	           // System.out.println(employeeList.toString().replace("[","").replace("]",""));
                 break;
                 
              case 3 :
                  Boolean found =false;
                  System.out.println("Enter Employee ID ");
                  int employeeNo=sc.nextInt();
                  Iterator<Employee>i=employeeList.iterator();
                  while(i.hasNext()){
                     Employee e=i.next();
                     if(e.getEmployeeNo()==employeeNo){
                         System.out.println(e);
                         found=true;
                     }
                  }
                  if(!found){
                       System.out.println("Record not found");
                  }
                  break;
	    case 4 :
	              found =false;
                  System.out.println("Enter Employee ID ");
                  employeeNo=sc.nextInt();
                  i=employeeList.iterator();
                  while(i.hasNext()){
                     Employee e=i.next();
                     if(e.getEmployeeNo()==employeeNo){
                         i.remove();
                         found=true;
                     }
                  }
                  if(!found){
                       System.out.println("Record not found");
                  
                  }
                  else {
                       System.out.println("Record Deleted !");
                  }
                  break;
	    }
	    
	}while(choice!=0);
	}
}
